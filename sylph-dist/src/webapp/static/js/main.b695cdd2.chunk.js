(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{195:function(e,t,a){e.exports=a(394)},388:function(e,t,a){},393:function(e,t,a){},394:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(4),c=a.n(o),l=a(410),i=a(409),s=a(11),u=a.n(s),m=a(24),p=a(20),d=a(21),f=a(67),h=a(23),g=a(22),y=a(396),v=a(407),b=a(141),E=a(5),j=a(397),k=y.a.Sider,x=b.a.SubMenu,S=function(e){Object(h.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={collapsed:!1},e.onCollapse=function(t){console.log(t),e.setState({collapsed:t})},e.render=function(){return r.a.createElement(k,{collapsible:!0,collapsed:e.state.collapsed,onCollapse:e.onCollapse},r.a.createElement("div",{className:"logo",style:{color:"white",width:"100%",textAlign:"center",fontSize:"20px",margin:"15px 0"}},"Sylph"),r.a.createElement(b.a,{theme:"dark",defaultSelectedKeys:["1"],mode:"inline"},r.a.createElement(b.a.Item,{key:"1"},r.a.createElement(j.a,{to:"/joblist"},r.a.createElement(E.a,{type:"tool"}),"JobManager")),r.a.createElement(x,{key:"2",title:r.a.createElement("span",null,r.a.createElement(E.a,{type:"tool"}),r.a.createElement("span",null,"Connector"))},r.a.createElement(b.a.Item,{key:"2"},r.a.createElement(j.a,{to:"/connectors"},r.a.createElement(E.a,{type:"tool"}),"Connectors")),r.a.createElement(b.a.Item,{key:"3"},r.a.createElement(j.a,{to:"/connector_manager"},r.a.createElement(E.a,{type:"tool"}),"Manager"))),r.a.createElement(b.a.Item,{key:"5"},r.a.createElement(j.a,{to:"/serverLogs"},r.a.createElement(E.a,{type:"tool"}),"ServerLogs")),r.a.createElement(x,{key:"sub1",title:r.a.createElement("span",null,r.a.createElement(E.a,{type:"user"}),r.a.createElement("span",null,"User"))},r.a.createElement(b.a.Item,{key:"7"},r.a.createElement("span",{onClick:e.props.logout},r.a.createElement(E.a,{type:"tool"}),"Logout")))))},e}return Object(d.a)(a)}(r.a.Component),O=a(405),w=a(406),I=a(70),C=a(31),N=function(e){Object(h.a)(a,e);var t=Object(g.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.props.afterLogin,a=this.props.form.getFieldDecorator;return r.a.createElement(O.a,{onSubmit:function(a){a.preventDefault(),e.props.form.validateFields(function(){var e=Object(m.a)(u.a.mark(function e(a,n){var r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a||console.log("Received values of form: ",n),e.next=3,fetch("/_sys/auth/login",{method:"POST",body:JSON.stringify(n),headers:{"content-type":"application/json"}});case 3:return r=e.sent,e.next=6,r.json();case 6:(r=e.sent).userName===n.userName&&(console.log("".concat(n.user," login ok")),t(r.userName));case 8:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}())},style:{width:"25vw",margin:"10vh auto 0 auto"}},r.a.createElement(O.a.Item,null,a("userName",{rules:[{required:!0,message:"Please input your username!"}]})(r.a.createElement(w.a,{prefix:r.a.createElement(E.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Username"}))),r.a.createElement(O.a.Item,null,a("password",{rules:[{required:!0,message:"Please input your Password!"}]})(r.a.createElement(w.a,{prefix:r.a.createElement(E.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))),r.a.createElement(O.a.Item,null,r.a.createElement("div",null,a("remember",{valuePropName:"checked",initialValue:!1})(r.a.createElement(I.a,null,"Remember me")),r.a.createElement("a",{className:"login-form-forgot",href:""},"Forgot password")),r.a.createElement(C.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Log in"),"Or ",r.a.createElement("a",{href:""},"register now!")))}}]),a}(r.a.Component),_=O.a.create({name:"normal_login"})(N),D=a(81),T=a(35),L=a(411),q=a(398),A=a(399),M=a(400),G=a(404),F=function(e){Object(h.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).deploys={},e.state={jobList:[],columns:[{title:"Job",dataIndex:"jobName",key:"jobName"},{title:"runId",dataIndex:"runId",key:"runId",width:200,render:function(t,a,n){if("DEPLOYING"===a.status){var o=function(t){return Object.assign([],e.state.jobList,t)};if(!e.deploys[a.jobId]){var c=setInterval(Object(m.a)(u.a.mark(function t(){var r;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchData("/job/".concat(a.jobId));case 2:"DEPLOYING"!==(r=t.sent).status?(clearInterval(e.deploys[a.jobId]),e.setState({jobList:o(Object(D.a)({},n,Object(T.a)({},r)))}),delete e.deploys[a.jobId]):e.setState({jobList:o(Object(D.a)({},n,Object(T.a)({},r)))});case 4:case"end":return t.stop()}},t)})),1e3);e.deploys[a.jobId]=c}return r.a.createElement(L.a,{color:"blue",key:t},r.a.createElement(E.a,{type:"loading"}),"\xa0\xa0processing...")}return t&&t.length>0?r.a.createElement(L.a,{color:"blue",key:t,onClick:function(){return window.open(a.appUrl)}},t):r.a.createElement(L.a,{color:"red"},"\u6682\u65e0")}},{title:"type",dataIndex:"type",key:"type"},{title:"status",dataIndex:"status",key:"status"},{title:"Action",key:"action",render:function(t,a,n){var o=r.a.createElement(q.a,{title:"Are you sure deploy this job?",onConfirm:function(){return e.handleDeployOrStop("deploy",a.jobId)},okText:"Yes",cancelText:"No",placement:"left"},r.a.createElement("a",{href:"/#"},"Deploy")),c=r.a.createElement(q.a,{title:"Are you sure stop this job?",onConfirm:function(){e.handleDeployOrStop("stop",a.jobId)},okText:"Yes",cancelText:"No",placement:"left"},r.a.createElement("a",{href:"/#"},"Stop"));return r.a.createElement("span",null,"STOP"===a.status||"RUNNING_FAILED"===a.status||"DEPLOY_FAILED"===a.status?o:c,r.a.createElement(A.a,{type:"vertical"}),r.a.createElement(q.a,{title:"Are you sure Delete this job?",onConfirm:function(){e.handleDeployOrStop("delete",a.jobId)},okText:"Yes",cancelText:"No",placement:"left"},r.a.createElement("a",{href:"/#",style:{color:"red"}},"Delete")),r.a.createElement(A.a,{type:"vertical"}),r.a.createElement("a",{onClick:function(){var t,n=a.type;t="FlinkStreamSql"===n||"FlinkMainClass"===n||"StructuredStreamingSql"===n||"SparkStreamingSql"===n?"/streamingSql/".concat(a.jobId):"/streamingEtl/".concat(a.jobId),e.props.history.push({pathname:t,state:{}})}},"Edit"))}}]},e.openNotificationWithIcon=function(e,t,a){M.a[e]({message:t,description:a,duration:6})},e.render=function(){return r.a.createElement("div",null,r.a.createElement("div",{style:{textAlign:"right",margin:"20px 10px"}},r.a.createElement(C.a,{type:"primary",icon:"reload",onClick:function(){return e.loadjobs()}},"Refresh"),r.a.createElement(C.a,{style:{margin:"0 10px"},type:"primary",icon:"folder-add",onClick:function(){e.props.history.push("/streamingEtl",{data:{}})}},"Create_ETL"),r.a.createElement(C.a,{type:"primary",icon:"folder-add",onClick:function(){return e.setState({visible:!0})}},"Create_StreamSQL"),r.a.createElement(v.a,{title:"Create New StreamSQL",visible:e.state.visible,onOk:function(){e.setState({visible:!1});var t=e.refs.create_new_job_id.state.value;e.props.history.push({pathname:"/streamingSql",state:{jobName:t,create:!0}})},onCancel:function(){e.setState({visible:!1})}},"JobId: ",r.a.createElement(w.a,{placeholder:"please enter job id",ref:"create_new_job_id"}))),r.a.createElement(G.a,{bordered:!0,pagination:!1,dataSource:e.state.jobList,columns:e.state.columns,rowKey:"jobId"}))},e}return Object(d.a)(a,[{key:"fetchData",value:function(){var e=Object(m.a)(u.a.mark(function e(t){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/_sys/job_manger".concat(t),{method:"GET"});case 2:return a=e.sent,e.next=5,a.json();case 5:if(!1!==(a=e.sent).success){e.next=9;break}return this.openNotificationWithIcon("error",a.error_code,a.message),e.abrupt("return");case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleDeployOrStop",value:function(){var e=Object(m.a)(u.a.mark(function e(t,a){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchData("/".concat(t,"/").concat(a));case 2:return e.next=4,this.loadjobs();case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"loadjobs",value:function(){var e=Object(m.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchData("/jobs");case 2:(t=e.sent)&&this.setState({jobList:t});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillMount",value:function(){this.loadjobs()}}]),a}(r.a.Component),P=function(e){Object(h.a)(a,e);var t=Object(g.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){for(var e=this.props.log,t=/\x1b\[\d*m/g,a=e.match(t),n=e.split(t),o={"\x1b[30m":"black","\x1b[31m":"red","\x1b[32m":"green","\x1b[33m":"#dab633","\x1b[34m":"blue","\x1b[35m":"magenta","\x1b[36m":"cyan","\x1b[37m":"white","\x1b[39m":"default","\x1b[m":"black"},c=[],l=[],i=0;i<n.length;i++)0!==i?l.push(r.a.createElement("span",{style:{color:o[a[i-1]]}},n[i])):l.push(r.a.createElement("span",{style:{color:"black"}},n[i]));return c.push(r.a.createElement("pre",{style:{marginBottom:"0em",overflow:"visible"}},l)),r.a.createElement("div",null,c)}}]),a}(r.a.Component),J=function(e){Object(h.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={arrLogs:[],last_num:-1,id:null,intervalId:null},e.render=function(){return r.a.createElement("div",{style:{height:"95vh",overflow:"scroll"},ref:"scroll_con"},e.state.arrLogs.map(function(e){return r.a.createElement(P,{log:e.val})}))},e}return Object(d.a)(a,[{key:"showlog",value:function(e){var t=!0;if(""!==e&&null!==e){if(null===e.logs||0===e.logs.length)return;var a=(new Date).getTime();for(var n in e.logs)this.state.arrLogs.length>1e3&&this.state.arrLogs.shift(),this.state.arrLogs.push({key:a+"_"+n,val:e.logs[n]});var r=this.refs.scroll_con;if(r.scrollTop<r.scrollHeight-r.clientHeight-1)return void(t=!1);this.setState({id:e.id,last_num:e.next,arrLogs:this.state.arrLogs}),t&&(r.scrollTop=r.scrollHeight)}}},{key:"fetchData",value:function(){var e=Object(m.a)(u.a.mark(function e(t,a){var n,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n in t=t+"?rd="+Math.random(),a)t+="&"+n+"="+a[n];return e.next=4,fetch(t,{method:"GET"});case 4:return r=e.sent,e.prev=5,e.next=8,r.json();case 8:r=e.sent,this.showlog(r),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),console.log(e.t0);case 15:case"end":return e.stop()}},e,this,[[5,12]])}));return function(t,a){return e.apply(this,arguments)}}()},{key:"componentWillMount",value:function(){var e=this,t=setInterval(function(){e.fetchData("/_sys/server/logs",{last_num:e.state.last_num,id:e.state.id})},1e3);this.setState({intervalId:t})}},{key:"componentWillUnmount",value:function(){console.log("Clearing ShowLogs Interval ".concat(this.state.intervalId)),clearInterval(this.state.intervalId)}}]),a}(r.a.Component),W=a(83),R=a(412),Y=a(401),z=a(402),U=a(408),H=a(403),B=a(72),K=a(143),V=["form","index"],Q=["editable","dataIndex","title","record","index","handleSave","children"],X=r.a.createContext(),Z=O.a.create()(function(e){var t=e.form,a=(e.index,Object(K.a)(e,V));return r.a.createElement(X.Provider,{value:t},r.a.createElement("tr",a))}),$=function(e){Object(h.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={editing:!1},e.toggleEdit=function(){var t=!e.state.editing;e.setState({editing:t},function(){t&&e.input.focus()})},e.save=function(t){var a=e.props,n=a.record,r=a.handleSave;e.form.validateFields(function(a,o){a&&a[t.currentTarget.id]||(e.toggleEdit(),r(Object(T.a)(Object(T.a)({},n),o)))})},e.renderCell=function(t){e.form=t;var a=e.props,n=a.children,o=a.dataIndex,c=a.record,l=a.title;return e.state.editing?r.a.createElement(O.a.Item,{style:{margin:0}},t.getFieldDecorator(o,{rules:[{required:!0,message:"".concat(l," is required.")}],initialValue:c[o]})(r.a.createElement(w.a,{ref:function(t){return e.input=t},onPressEnter:e.save,onBlur:e.save}))):r.a.createElement("div",{className:"editable-cell-value-wrap",style:{paddingRight:24},onClick:e.toggleEdit},n)},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.editable,a=(e.dataIndex,e.title,e.record,e.index,e.handleSave,e.children),n=Object(K.a)(e,Q);return r.a.createElement("td",n,t?r.a.createElement(X.Consumer,null,this.renderCell):a)}}]),a}(r.a.Component),ee=(r.a.Component,a(190)),te=(a(387),a(388),a(389),a(390),function(e){Object(h.a)(a,e);var t=Object(g.a)(a);function a(e,n){var o;return Object(p.a)(this,a),(o=t.call(this)).state={create:!1,jobId:null,jobName:null,engine:"FlinkStreamSql",query:"create input table xxx()",config:{},editConfig:{},showErrorMessage:"",visible:!1,saveing:!1},o.columns=[{title:"key",dataIndex:"key"},{title:"value",dataIndex:"value",editable:!0}],o.showDrawer=function(){o.setState({visible:!0})},o.openNotificationWithIcon=function(e,t,a){M.a[e]({message:t,description:a,duration:6})},o.render=function(){var e=W.a.Option,t={body:{row:Z,cell:$}},a=o.columns.map(function(e){return e.editable?Object(T.a)(Object(T.a)({},e),{},{onCell:function(t){return{record:t,editable:e.editable,dataIndex:e.dataIndex,title:e.title,handleSave:function(e){o.state.editConfig[e.key]=e.value,o.setState({editConfig:o.state.editConfig})}}}}):e});return r.a.createElement("div",null,function(){if(o.state.showErrorMessage)return r.a.createElement(R.a,{message:"Error",description:r.a.createElement("pre",null,o.state.showErrorMessage),type:"error",showIcon:!0,closable:!0,onClose:function(){return o.setState({showErrorMessage:""})}})}(),r.a.createElement(Y.a,{style:{margin:"10px"}},r.a.createElement(z.a,{span:4},r.a.createElement(L.a,{style:{fontSize:"16px",padding:"5px 25px"},color:"blue"},"Job: ",o.state.jobName)),r.a.createElement(z.a,{span:20,style:{textAlign:"right"}},r.a.createElement(W.a,{style:{margin:"0 10px"},defaultValue:"FlinkStreamSql",value:o.state.engine,onSelect:function(e){o.setState({engine:e})}},r.a.createElement(e,{value:"FlinkStreamSql"},"FlinkStreamSql"),r.a.createElement(e,{value:"SparkStreamingSql"},"SparkStreamingSql"),r.a.createElement(e,{value:"StructuredStreamingSql"},"StructuredStreamingSql")),r.a.createElement(C.a,{type:"primary",icon:"setting",onClick:o.showDrawer},"Setting"),r.a.createElement(C.a,{style:{margin:"0 10px"},type:"primary",icon:"file"},"Files"),r.a.createElement(C.a,{type:"primary",icon:"save",onClick:function(){return o.jobSave()}},"Save",function(){if(o.state.saveing)return r.a.createElement(E.a,{type:"loading"})}()))),r.a.createElement(ee.UnControlled,{value:o.state.query,style:{"min-height":"100%",height:"auto"},options:{lineNumbers:!0,mode:{name:"text/x-sql"},extraKeys:{Ctrl:"autocomplete"},theme:"neo"},onChange:function(e,t,a){o.state.query=a}}),r.a.createElement("div",null,r.a.createElement(U.a,{title:"Setting job config",width:"50%",onClose:function(){o.setState({visible:!1,editConfig:o.state.config})},visible:o.state.visible},r.a.createElement("p",null,"basic configuration:"),r.a.createElement(G.a,{components:t,scroll:{y:420},pagination:{pageSize:50},dataSource:function(){var e=o.state.editConfig;return Object.keys(e).map(function(t){return{key:t,value:e[t],description:""}})}(),columns:a}),r.a.createElement("div",{style:{position:"absolute",left:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right"}},r.a.createElement(C.a,{onClick:function(){o.setState({visible:!1,editConfig:o.state.config})},style:{marginRight:8}},"Cancel"),r.a.createElement(C.a,{onClick:function(){o.setState({visible:!1,config:o.state.editConfig})},type:"primary"},"Save")))))},o.state.jobId=e.match.params.jobId,void 0!==e.location.state&&(o.state.jobName=e.location.state.jobName),o.state.create=void 0!==o.state.jobName&&null!==o.state.jobName,o}return Object(d.a)(a,[{key:"fetchGetData",value:function(){var e=Object(m.a)(u.a.mark(function e(t){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"GET"});case 2:return a=e.sent,e.next=5,a.json();case 5:a=e.sent,this.setState({jobName:a.jobName,query:a.queryText,engine:a.type,config:JSON.parse(a.config),editConfig:JSON.parse(a.config)});case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){}},{key:"componentWillMount",value:function(){void 0===this.state.jobId||this.state.create||this.fetchGetData("/_sys/job_manger/job/".concat(this.state.jobId))}},{key:"jobSave",value:function(){var e=Object(m.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({saveing:!0}),e.next=3,fetch("/_sys/job_manger/save",{method:"POST",body:JSON.stringify({id:this.state.jobId,jobName:this.state.jobName,queryText:this.state.query,type:this.state.engine,config:JSON.stringify(this.state.config)}),headers:{"content-type":"application/json"}});case 3:return t=e.sent,e.prev=4,e.next=7,t.json();case 7:if(!1!==(t=e.sent).success){e.next=11;break}return this.setState({showErrorMessage:t.message}),e.abrupt("return");case 11:H.a.success("Save job ".concat(this.state.jobName," success"),5);case 12:return e.prev=12,this.setState({saveing:!1}),e.finish(12);case 15:case"end":return e.stop()}},e,this,[[4,,12,15]])}));return function(){return e.apply(this,arguments)}}()}]),a}(r.a.Component)),ae=function(e){Object(h.a)(a,e);var t=Object(g.a)(a);function a(e,n){var o;return Object(p.a)(this,a),(o=t.call(this)).state={jobId:null,graph:""},o.render=function(){return r.a.createElement("div",null,"etl job: ",o.state.jobId,r.a.createElement("p",null,"not support"),r.a.createElement("div",{id:"actuators_select"}),r.a.createElement("div",{id:"control-panel"}),r.a.createElement("div",{id:"flow_modal"}),r.a.createElement("div",{id:"flow-panel",style:{height:"95vh",width:"100px"}}))},console.log(e),o.state.jobId=e.location.state.data.jobId,o}return Object(d.a)(a,[{key:"fetchGetData",value:function(){var e=Object(m.a)(u.a.mark(function e(t,a){var n,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n in t=t+"?rd="+Math.random(),a)t+="&"+n+"="+a[n];return e.next=4,fetch(t,{method:"GET"});case 4:return r=e.sent,e.next=7,r.json();case 7:r=e.sent,this.setState({graph:r.query,jobType:r.jobType,config:r.config});case 9:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"componentWillMount",value:function(){void 0!==this.state.jobId&&this.fetchGetData("/_sys/etl_builder/get",{jobId:this.state.jobId})}},{key:"onEditChange",value:function(e){this.setState({query:e.target.value})}}]),a}(r.a.Component),ne=function(e){Object(h.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={connectors:[]},e.columns=[{title:"connector",dataIndex:"name",key:"name",render:function(e,t){return r.a.createElement(L.a,{key:e,onClick:function(){}},e)}},{title:"driver",dataIndex:"driver",key:"driver"},{title:"type",dataIndex:"type",key:"type",render:function(e,t){return r.a.createElement(L.a,{color:"blue",key:e},e)}},{title:"realTime",dataIndex:"realTime",key:"realTime"}],e.render=function(){return r.a.createElement("div",null,r.a.createElement(G.a,{dataSource:e.state.connectors,columns:e.columns,expandedRowRender:function(e){return r.a.createElement("p",{style:{margin:0}},JSON.stringify(e.config))}}))},e}return Object(d.a)(a,[{key:"fetchData",value:function(){var e=Object(m.a)(u.a.mark(function e(){var t,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/_sys/plugin/list_connectors",{method:"GET"});case 2:return a=e.sent,e.next=5,a.json();case 5:if(a=e.sent,0!==Object.values(a).length){e.next=8;break}return e.abrupt("return");case 8:this.setState({connectors:(t=[].concat).call.apply(t,Object(B.a)(Object.values(a)))});case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillMount",value:function(){this.fetchData()}}]),a}(r.a.Component),re=function(e){Object(h.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={loading:!1,connector:[]},e.columns=[{title:"name",dataIndex:"name",key:"name",render:function(e,t){return r.a.createElement(L.a,{key:e,onClick:function(){}},e)}},{title:"size",dataIndex:"size",key:"size"},{title:"loadTime",dataIndex:"loadTime",key:"loadTime"},{title:"action",dataIndex:"action",key:"action",render:function(t,a){return r.a.createElement(q.a,{title:"Are you sure Delete this moudle?",onConfirm:Object(m.a)(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.next=3,fetch("/_sys/plugin/delete_module/?name=".concat(a.name),{method:"GET"});case 3:e.fetchData();case 4:case"end":return t.stop()}},t)})),okText:"Yes",cancelText:"No",placement:"left"},r.a.createElement("a",{href:"#",style:{color:"red"}},"Delete"))}}],e.render=function(){return r.a.createElement("div",null,r.a.createElement(Y.a,{style:{margin:"10px"}},r.a.createElement(z.a,{style:{textAlign:"right"}},r.a.createElement(C.a,{type:"primary",icon:"setting",onClick:e.reloadConnectors.bind(Object(f.a)(e))},"Reload",function(){if(e.state.loading)return r.a.createElement(E.a,{type:"loading"})}()))),r.a.createElement(G.a,{dataSource:e.state.connector,columns:e.columns,expandedRowRender:function(e){return r.a.createElement("div",null,e.drivers.map(function(e){return r.a.createElement(L.a,{key:e,color:"blue"}," ",e)}))}}))},e}return Object(d.a)(a,[{key:"fetchData",value:function(){var e=Object(m.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/_sys/plugin/list_modules",{method:"GET"});case 2:return t=e.sent,e.next=5,t.json();case 5:t=e.sent,this.setState({loading:!1,connector:t});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillMount",value:function(){this.fetchData()}},{key:"reloadConnectors",value:function(){var e=Object(m.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,fetch("/_sys/plugin/reload",{method:"GET"});case 3:H.a.success("reload success"),this.fetchData();case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),a}(r.a.Component),oe=y.a.Content,ce=function(e){Object(h.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={login:!1,loading:!0,userName:null},e.render=function(){return e.state.loading?r.a.createElement("span",null):!0!==e.state.login?r.a.createElement(_,{afterLogin:function(t){return e.setState({userName:t,login:!0})}}):r.a.createElement(y.a,{style:{minHeight:"100vh"}},r.a.createElement(S,{logout:e.logout.bind(Object(f.a)(e))}),r.a.createElement(y.a,null,r.a.createElement(oe,{style:{margin:"16px 16px",background:"white"}},r.a.createElement(i.a,{exact:!0,path:"/",component:F}),r.a.createElement(i.a,{path:"/joblist",component:F}),r.a.createElement(i.a,{path:"/connectors",component:ne}),r.a.createElement(i.a,{path:"/connector_manager",component:re}),r.a.createElement(i.a,{path:"/serverLogs",component:J}),r.a.createElement(i.a,{path:"/streamingSql/:jobId",component:te}),r.a.createElement(i.a,{exact:!0,path:"/streamingSql",component:te}),r.a.createElement(i.a,{path:"/streamingEtl",component:ae}),r.a.createElement(i.a,{path:"/abc",component:function(){return r.a.createElement("span",null,"AAAAAA")}}))))},e}return Object(d.a)(a,[{key:"login",value:function(){var e=Object(m.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/_sys/auth/login",{method:"POST",body:JSON.stringify({userName:"",password:""}),headers:{"content-type":"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:!1===(t=e.sent).success?this.setState({login:!1,loading:!1}):this.setState({userName:t.userName,login:!0,loading:!1});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=this;v.a.confirm({title:"Do you Want to Logout this account?",content:this.state.userName,onOk:function(){var t=Object(m.a)(u.a.mark(function t(){var a;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/_sys/auth/logout",{method:"GET"});case 2:return a=t.sent,t.next=5,a.json();case 5:a=t.sent,e.setState({login:!1});case 7:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),onCancel:function(){console.log("Cancel")}})}},{key:"componentWillMount",value:function(){this.login()}}]),a}(r.a.Component);a(392),a(393);c.a.render(r.a.createElement(l.a,null,r.a.createElement(i.a,{path:"/",component:ce})),document.getElementById("root"))}},[[195,1,2]]]);
//# sourceMappingURL=main.b695cdd2.chunk.js.map